<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic URL Test</title>
</head>
<body>
    <h1>Dynamic URL Test</h1>
    <div id="results"></div>

    <script>
        function testDynamicUrls() {
            const results = document.getElementById('results');
            
            // Test window.location.origin
            const origin = window.location.origin;
            results.innerHTML += `<p><strong>Current Origin:</strong> ${origin}</p>`;
            
            // Test API endpoints
            const endpoints = [
                '/health',
                '/chat/stream',
                '/feedback',
                '/auth/microsoft/callback'
            ];
            
            results.innerHTML += '<h3>API Endpoints:</h3>';
            endpoints.forEach(endpoint => {
                const fullUrl = `${origin}${endpoint}`;
                results.innerHTML += `<p><code>${fullUrl}</code></p>`;
            });
            
            // Test with different scenarios
            results.innerHTML += '<h3>How it works:</h3>';
            results.innerHTML += '<ul>';
            results.innerHTML += '<li><strong>Localhost:</strong> http://localhost:8002/health</li>';
            results.innerHTML += '<li><strong>Production:</strong> https://yourdomain.com/health</li>';
            results.innerHTML += '<li><strong>Custom Port:</strong> http://localhost:3000/health</li>';
            results.innerHTML += '</ul>';
            
            results.innerHTML += '<h3>Benefits:</h3>';
            results.innerHTML += '<ul>';
            results.innerHTML += '<li>✅ Automatically detects protocol (http/https)</li>';
            results.innerHTML += '<li>✅ Automatically detects hostname</li>';
            results.innerHTML += '<li>✅ Automatically detects port</li>';
            results.innerHTML += '<li>✅ Works in development and production</li>';
            results.innerHTML += '<li>✅ No configuration needed</li>';
            results.innerHTML += '</ul>';
        }
        
        // Run test when page loads
        testDynamicUrls();
    </script>
</body>
</html>
